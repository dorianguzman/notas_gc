<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - Ganadería Catorce</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <img src="assets/logo.png" alt="Ganadería Catorce" class="logo">
                <div class="title-container">
                    <h1>Reportes</h1>
                    <span class="status-dot ready" id="statusDot" title="Estado: Lista"></span>
                </div>
            </div>
            <div class="header-actions">
                <button type="button" class="btn-new" onclick="window.location.href='index.html'">
                    <svg class="icon-inline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Atrás
                </button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="form-section" style="margin-bottom: 20px;">
            <div style="display: flex; gap: 8px; border-bottom: 2px solid #e0e0e0;">
                <button id="tabThisMonth" class="tab-button active" onclick="switchTab('this_month')">Este Mes</button>
                <button id="tabLastMonth" class="tab-button" onclick="switchTab('last_month')">Mes Anterior</button>
                <button id="tabComparison" class="tab-button" onclick="switchTab('comparison')">Ambos</button>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" style="display: none; text-align: center; padding: 40px;">
            <p>Cargando reporte...</p>
        </div>

        <!-- Report Content -->
        <div id="reportContent" style="display: none;">

            <!-- Period Info -->
            <div class="form-section">
                <p id="periodInfo" style="text-align: center; color: #666; font-size: 14px;"></p>
            </div>

            <!-- Metrics Cards -->
            <div class="totals-section">
                <div class="total-row">
                    <label>Ingresos Totales:</label>
                    <span id="totalRevenue" style="color: #2e7d32; font-weight: bold;">$0.00</span>
                </div>
                <div class="total-row">
                    <label>Total de Notas:</label>
                    <span id="totalNotas">0</span>
                </div>
                <div class="total-row">
                    <label>Ticket Promedio:</label>
                    <span id="avgTicket">$0.00</span>
                </div>
                <div class="total-row">
                    <label>Items Vendidos:</label>
                    <span id="totalItems">0</span>
                </div>
            </div>

            <!-- Top Customers -->
            <div class="conceptos-section">
                <h2>Top Clientes</h2>
                <div id="topCustomersContainer" class="table-container">
                    <table id="topCustomersTable" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">#</th>
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Cliente</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Ingresos</th>
                            </tr>
                        </thead>
                        <tbody id="topCustomersBody">
                            <tr>
                                <td colspan="3" style="padding: 20px; text-align: center; color: #999;">
                                    No hay datos disponibles
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Top Products -->
            <div class="conceptos-section">
                <h2>Top Productos</h2>
                <div id="topProductsContainer" class="table-container">
                    <table id="topProductsTable" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">#</th>
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Producto</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Cantidad</th>
                            </tr>
                        </thead>
                        <tbody id="topProductsBody">
                            <tr>
                                <td colspan="3" style="padding: 20px; text-align: center; color: #999;">
                                    No hay datos disponibles
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

        <!-- Comparison Content -->
        <div id="comparisonContent" style="display: none;">

            <!-- Period Info -->
            <div class="form-section">
                <p id="comparisonPeriodInfo" style="text-align: center; color: #666; font-size: 14px;"></p>
            </div>

            <!-- Comparison Metrics -->
            <div id="comparisonMetrics"></div>

            <!-- Comparison Tables -->
            <div class="conceptos-section">
                <h2>Comparación de Clientes</h2>
                <div class="table-container">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Cliente</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Este Mes</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Mes Anterior</th>
                                <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd;">Cambio</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonCustomersBody">
                            <tr>
                                <td colspan="4" style="padding: 20px; text-align: center; color: #999;">
                                    No hay datos disponibles
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="conceptos-section">
                <h2>Comparación de Productos</h2>
                <div class="table-container">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Producto</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Este Mes</th>
                                <th style="padding: 10px; text-align: right; border-bottom: 2px solid #ddd;">Mes Anterior</th>
                                <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd;">Cambio</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonProductsBody">
                            <tr>
                                <td colspan="4" style="padding: 20px; text-align: center; color: #999;">
                                    No hay datos disponibles
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

        <!-- Error State -->
        <div id="errorState" style="display: none; text-align: center; padding: 40px;">
            <p style="color: #d32f2f;">⚠️ Error al cargar el reporte</p>
            <p style="font-size: 14px; color: #666;">Intenta nuevamente más tarde</p>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>

    </div>

    <!-- Main Script -->
    <script src="reports.js"></script>
</body>
</html>
